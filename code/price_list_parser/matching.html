<!DOCTYPE html>
<html class="writer-html5" lang="en" >
<head>
  <meta charset="utf-8" /><meta name="generator" content="Docutils 0.18.1: http://docutils.sourceforge.net/" />

  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>matching &mdash; Price list parser 0.8 documentation</title>
      <link rel="stylesheet" href="../../_static/pygments.css" type="text/css" />
      <link rel="stylesheet" href="../../_static/css/theme.css" type="text/css" />
  <!--[if lt IE 9]>
    <script src="../../_static/js/html5shiv.min.js"></script>
  <![endif]-->
  
        <script src="../../_static/jquery.js?v=5d32c60e"></script>
        <script src="../../_static/_sphinx_javascript_frameworks_compat.js?v=2cd50e6c"></script>
        <script src="../../_static/documentation_options.js?v=a0e24af7"></script>
        <script src="../../_static/doctools.js?v=888ff710"></script>
        <script src="../../_static/sphinx_highlight.js?v=dc90522c"></script>
    <script src="../../_static/js/theme.js"></script>
    <link rel="index" title="Index" href="../../genindex.html" />
    <link rel="search" title="Search" href="../../search.html" />
    <link rel="next" title="models" href="models.html" />
    <link rel="prev" title="price_list_parser" href="index.html" /> 
</head>

<body class="wy-body-for-nav"> 
  <div class="wy-grid-for-nav">
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >

          
          
          <a href="../../index.html" class="icon icon-home">
            Price list parser
          </a>
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" aria-label="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>
        </div><div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="Navigation menu">
              <p class="caption" role="heading"><span class="caption-text">Contents:</span></p>
<ul class="current">
<li class="toctree-l1"><a class="reference internal" href="../../flow/index.html">Overview</a></li>
<li class="toctree-l1 current"><a class="reference internal" href="../index.html">Function documentation</a><ul class="current">
<li class="toctree-l2"><a class="reference internal" href="../app.html">app</a></li>
<li class="toctree-l2"><a class="reference internal" href="../local_test.html">local_test</a></li>
<li class="toctree-l2"><a class="reference internal" href="../adobe_extract/index.html">adobe_extract</a></li>
<li class="toctree-l2"><a class="reference internal" href="../classifier/index.html">classifier</a></li>
<li class="toctree-l2"><a class="reference internal" href="../confidence/index.html">confidence</a></li>
<li class="toctree-l2"><a class="reference internal" href="../dl_classification/index.html">dl_classification</a></li>
<li class="toctree-l2"><a class="reference internal" href="../equipment_parser/index.html">equipment_parser</a></li>
<li class="toctree-l2"><a class="reference internal" href="../expert_rules/index.html">expert_rules</a></li>
<li class="toctree-l2"><a class="reference internal" href="../gpt_processing/index.html">gpt_processing</a></li>
<li class="toctree-l2"><a class="reference internal" href="../layout_transforming/index.html">layout_transforming</a></li>
<li class="toctree-l2"><a class="reference internal" href="../make_logs/index.html">make_logs</a></li>
<li class="toctree-l2"><a class="reference internal" href="../multi_values_split/index.html">multi_values_split</a></li>
<li class="toctree-l2"><a class="reference internal" href="../page_selection/index.html">page_selection</a></li>
<li class="toctree-l2"><a class="reference internal" href="../parser_postprocessing/index.html">parser_postprocessing</a></li>
<li class="toctree-l2"><a class="reference internal" href="../preprocess_pdf/index.html">preprocess_pdf</a></li>
<li class="toctree-l2 current"><a class="reference internal" href="index.html">price_list_parser</a><ul class="current">
<li class="toctree-l3 current"><a class="current reference internal" href="#">matching</a></li>
<li class="toctree-l3"><a class="reference internal" href="models.html">models</a></li>
<li class="toctree-l3"><a class="reference internal" href="multiple_price_lists_utils.html">multiple_price_lists_utils</a></li>
<li class="toctree-l3"><a class="reference internal" href="parser_v2.html">parser_v2</a></li>
<li class="toctree-l3"><a class="reference internal" href="parser_v2_utils.html">parser_v2_utils</a></li>
<li class="toctree-l3"><a class="reference internal" href="settings.html">settings</a></li>
<li class="toctree-l3"><a class="reference internal" href="storage.html">storage</a></li>
<li class="toctree-l3"><a class="reference internal" href="transform_to_json.html">transform_to_json</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../shared/index.html">shared</a></li>
<li class="toctree-l2"><a class="reference internal" href="../table_parser_v2/index.html">table_parser_v2</a></li>
<li class="toctree-l2"><a class="reference internal" href="../textract/index.html">textract</a></li>
</ul>
</li>
</ul>

        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap"><nav class="wy-nav-top" aria-label="Mobile navigation menu" >
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../../index.html">Price list parser</a>
      </nav>

      <div class="wy-nav-content">
        <div class="rst-content">
          <div role="navigation" aria-label="Page navigation">
  <ul class="wy-breadcrumbs">
      <li><a href="../../index.html" class="icon icon-home" aria-label="Home"></a></li>
          <li class="breadcrumb-item"><a href="../index.html">Function documentation</a></li>
          <li class="breadcrumb-item"><a href="index.html">price_list_parser</a></li>
      <li class="breadcrumb-item active">matching</li>
      <li class="wy-breadcrumbs-aside">
            <a href="../../_sources/code/price_list_parser/matching.rst.txt" rel="nofollow"> View page source</a>
      </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
             
  <section id="matching">
<h1>matching<a class="headerlink" href="#matching" title="Link to this heading"></a></h1>
<dl class="py function">
<dt class="sig sig-object py" id="match">
<span class="sig-name descname"><span class="pre">match</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">ground_truth_json</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">predictions_json</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">previous_document</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">parsed_tables</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">settings</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#match" title="Link to this definition"></a></dt>
<dd><p>Matches the ground truth and predictions JSONs and returns the results. If the ground truth JSON is empty, it returns an empty MatchAllResults object. It also simplifies the JSON format for both ground truth and predictions. If the previous document is not None and settings.soft_copy is True, it corrects the predictions. It evaluates the combinations for both ground truth and predictions and sets the results. If there are no unmatched predictions and truth, it sets perfect_match to True.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>ground_truth_json</strong> (<em>dict</em>) – The ground truth JSON.</p></li>
<li><p><strong>predictions_json</strong> (<em>dict</em>) – The predictions JSON.</p></li>
<li><p><strong>previous_document</strong> (<em>dict</em><em> or </em><em>None</em>) – The previous document.</p></li>
<li><p><strong>parsed_tables</strong> (<em>list</em><em>[</em><em>dict</em><em>]</em>) – The parsed tables.</p></li>
<li><p><strong>settings</strong> (<em>dict</em>) – The settings.</p></li>
</ul>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p>The match results.</p>
</dd>
<dt class="field-odd">Return type<span class="colon">:</span></dt>
<dd class="field-odd"><p>MatchAllResults</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="identify_missing_categories">
<span class="sig-name descname"><span class="pre">identify_missing_categories</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">tables</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#identify_missing_categories" title="Link to this definition"></a></dt>
<dd><p>Identifies the missing categories in the tables. It checks if “drivetrain” and “transmission” are found in the types of labels in the tables. If not found, it adds them to the missing labels list.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><p><strong>tables</strong> (<em>list</em><em>[</em><em>TableParser</em><em>]</em>) – The tables to identify missing categories from.</p>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p>The missing labels.</p>
</dd>
<dt class="field-odd">Return type<span class="colon">:</span></dt>
<dd class="field-odd"><p>list[str]</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="correct_predictions">
<span class="sig-name descname"><span class="pre">correct_predictions</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">previous_document</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">categories_base</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">categories_extra</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">predictions</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#correct_predictions" title="Link to this definition"></a></dt>
<dd><p>Corrects the predictions based on the previous document. It simplifies the JSON format for the previous predictions. If the absolute difference between the length of previous predictions and predictions is greater than 3, it returns None. It evaluates the combinations for previous predictions and predictions and sets the results. If the best match is found in the unmatched predictions, it corrects the field.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>previous_document</strong> (<em>dict</em>) – The previous document.</p></li>
<li><p><strong>categories_base</strong> (<em>list</em><em>[</em><em>str</em><em>]</em>) – The base categories.</p></li>
<li><p><strong>categories_extra</strong> (<em>list</em><em>[</em><em>str</em><em>]</em>) – The extra categories.</p></li>
<li><p><strong>predictions</strong> (<em>list</em><em>[</em><em>dict</em><em>]</em>) – The predictions.</p></li>
</ul>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="correct_field">
<span class="sig-name descname"><span class="pre">correct_field</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">predictions</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">index</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">field</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">prev_match</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#correct_field" title="Link to this definition"></a></dt>
<dd><p>Corrects the field in the predictions based on the previous match. If the field in the predictions at the given index is not equal to the field in the previous match, it updates the field in the predictions with the field from the previous match.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>predictions</strong> (<em>list</em><em>[</em><em>dict</em><em>]</em>) – The predictions.</p></li>
<li><p><strong>index</strong> (<em>int</em>) – The index of the prediction to correct.</p></li>
<li><p><strong>field</strong> (<em>str</em>) – The field to correct.</p></li>
<li><p><strong>prev_match</strong> (<em>dict</em>) – The previous match.</p></li>
</ul>
</dd>
</dl>
</dd></dl>

</section>


           </div>
          </div>
          <footer><div class="rst-footer-buttons" role="navigation" aria-label="Footer">
        <a href="index.html" class="btn btn-neutral float-left" title="price_list_parser" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left" aria-hidden="true"></span> Previous</a>
        <a href="models.html" class="btn btn-neutral float-right" title="models" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right" aria-hidden="true"></span></a>
    </div>

  <hr/>

  <div role="contentinfo">
    <p>&#169; Copyright 2023, Pareto.</p>
  </div>

  Built with <a href="https://www.sphinx-doc.org/">Sphinx</a> using a
    <a href="https://github.com/readthedocs/sphinx_rtd_theme">theme</a>
    provided by <a href="https://readthedocs.org">Read the Docs</a>.
   

</footer>
        </div>
      </div>
    </section>
  </div>
  <script>
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script> 

</body>
</html>